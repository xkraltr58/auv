# Params for Orca nodes:

manager:
  ros__parameters:
    mav_msg_ids: [31, 32]
    mav_msg_rate: 20

base_controller:
  ros__parameters:
    use_sim_time: False
    timer_rate: 20  # Motion model period

    # List frames for clarity:
    map_frame_id: "map"  # ArduSub EKF frame; mavros expects this to be "map"
    slam_frame_id: "slam"  # Origin of map generated by SLAM
    down_frame_id: "down"  # Stereo camera points down
    odom_frame_id: "odom"
    base_frame_id: "base_link"
    camera_frame_id: "left_camera_link"  # Note: the link, not the frame

    # Motion model
    mdl_mass: 9.9
    mdl_volume: 0.01
    mdl_fluid_density: 997.0
    mdl_drag_partial_const_yaw: 0.07  # Hand-tuned drag value for yaw_vel == 0.25, see nav2 params
    mdl_thrust_dz_pwm: 0  # No input deadzone for rc override

    # These are maximums, so they should be higher than the nav2 params
    x_vel: 0.8
    y_vel: 0.2
    z_vel: 0.5
    yaw_vel: 0.5
    x_accel: 1.0
    y_accel: 0.2
    z_accel: 0.5
    yaw_accel: 1.0

# Params for orb_slam2 nodes:

orb_slam2_stereo:
  ros__parameters:
    use_sim_time: False

    # ros_ign_image publishes images RELIABLE
    subscribe_best_effort: False

    publish_pointcloud: True
    publish_pose: True
    publish_tf: False
    localize_only: False

    pointcloud_frame_id: "down"  # Map frame to use down-facing cameras
    camera_frame_id: "left_camera_link"

    map_file: "map.bin"
    load_map: False

    ORBextractor/nFeatures: 1200
    ORBextractor/scaleFactor: 1.2
    ORBextractor/nLevels: 8
    ORBextractor/iniThFAST: 20
    ORBextractor/minThFAST: 7

    camera_fps: 30
    # Color order of the images (0: BGR, 1: RGB. It is ignored if images are grayscale)
    camera_rgb_encoding: True

    # See https://github.com/raulmur/ORB_SLAM2/issues/89 for the author's explanation of these:
    ThDepth: 40.0
    depth_map_factor: 1.0
    camera_baseline: 171.0  # Right camera info p[3], flip sign
